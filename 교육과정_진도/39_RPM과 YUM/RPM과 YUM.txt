## RPM과 YUM

# 사전지식
- RPM과 YUM : 리드햇 계열의 리눅스의 패키지 설치 프로그램
- 차이점
(1) RPM : 설치시 패키지의 의존성으로 인해 설치과정이 복잡
	ex) a를 설치시 b와 c가 필요해서 설치가 안됨
		b를 설치하려면 d와 e를 설치를 요구
- 조건 : 인터넷 연결이 필요없는 대신, .rpm 패키지파일이 컴퓨터에 있어야한다

(2) YUM : 의존관계 상 필요한 패키지를 자동적으로 웹에서 다운받아서 프로그램을 설치해줌
- 조건 : 인터넷 연결이 요구됨

--------------------------------------------------------------------------------------------

# 사용법_명령어
- arch : 본인 컴퓨터의 cpu 비트 확인가능
- 패키지 저장 위치 : 리눅스는 /dev/media 폴더 내에 패키지들이 저장되어 있다

1. RPM
- 패키지 형식 : .rpm으로 끝남 / noarche : 모든 cpu설치가능(32, 64비트)
(1) i386, 486, 586, 686 : 인텔, amd 계열의 32비트 cpu
(2) x86_64 : 인텔, amd 계열의 64비트 cpu

- 설치 : rpm -ivh 패키지명
- 업뎃 : rpm -Uvh 패키지명
- 삭제 : rpm -e 패키지명 ( * 권장하는 삭제방식 )
( rpm은 삭제시 의존관계에 따라 삭제가 강제된다)
- 설치여부 확인 : rpm -qa 
- 특정 패키지 설치 확인 : rpm -qa | grep -i 패키지명

- 설치방법
(1) find / -name 패키지명* 명령어를 통해 필요한 패키지가 있는지 확인
(2) rpm -ivh로 필요한 패키지 설치
(3) 의존관계로 인한 설치 안될경우, 해당 패키지를 다시 find로 찾아냄
+ 서로 의존관계라 설치가 안되는 경우  rpm -ivh --nodeps 로 강제설치 * (nodeps : 의존성무시)


2. YUM
- 사전작업 : 네트워크 없이도 yum 명령어를 시용하여 패키지를 다운받기 위해,
서버 로컬에 전용 레퍼지토리를 구성하여 yum을 사용한다


(1) iso 이미지 설치와 마운트
- iso 설치 이유 : 레드햇 os에서 yum을 이용한 패키지 설치시 레드햇 서브스크립션 등록이 되어있어야 레드햇사이트를 
이용한 yum 설치가 가능해지며, 서브스크립션 구매 대신, iso파일을 로컬에 복사하여 마운트하여 설치할 수 있음


(1) 이동 :  cd /etc/yum.repos.d 이동 / local.repo 
(2) 편집 : 해당 위치에 vi yum.repo vi편집기로 텍스트파일 만들기(yum 레파지토리)
	[RHEL8_BaseOS]
	name=RHEL8_BaseOS
	baseurl=file:///media/BaseOS/
	enabled=1
	gpgcheck=0	: 체크값, 

	[RHEL8_BaseOS]
	name=RHEL8_AppStream
	baseurl=file:///media/AppStream/
	enabled=1
	gpgcheck=0

(3) 마운트 : mount /dev/sr0 /media/

-----------------


# yum 사용 경우 
(1) 인터넷이 연결된경우
- 로컬에있는 레파지토리를 통해 필요한 패키지를 다운받음
- 항상 최신버전을 사용해야함
- 서브스크립트 권한을 이용(유료)

(2) 로컬인 경우 : iso, 또는 cd 내 rpm 파일을 라이브러리로 yum을 사용


============================


(1) rpm 패키지가 저장된 폴더 위치 확인 :  cd, 또는 iso 파일로 가지고있는지
(2) iso파일을 특정 레파토리에 마운트할지, 해당 파일을 내 서버에 전부 카피할건지 선택
(차이 : 용량차이, fstab마운트 에러발생여부)
(3) 


# yum 세팅과정
1. 마운트 		: mount /dev/sr0 /media 
- dev/sr0(3d룸) 장치와 media(홈디렉터리)와 마운트
2. yum 설정 	: (1) 경로 : /etc/yum.repos.d 
		  (2) local.repo vi편집기로 만들기

3. 카피 		: (1) 마운트는 매번 로그인시 풀리기 때문에, iso파일을 전부 임의로 만든 디렉토리에 패키지를 복사
		- cp -r /media(cd룸이 된 디렉터리) /package(저장될 폴더명)
		 (2) local.repo 수정 : 경로를 마운트경로에서 /package 경로로





- 설치 : yum -y install 패키지명
	- 패키지명은 구글링 검색을 통해 알 수 있음
	ex) 마리아db, 아파치 등
- 패키지 찾기 	 : yum search 패키지명
- 패키지 리스트 조회 : yum list 
- 삭제 * 		 : yum -y remove 패키지명 
(삭제는 rpm 명령어로 삭제할것, yum은 의존관계도 같이 삭제하는데 의존관계 패키지는 필요할 수도 있기 때문)
 

(1) -y : 모든 상황에 yes로 대답한다는 의미

-------------------------------------------------------------------------

# 리눅스 서버에 없는 rpm 패키지 가져오기
(1) .rpm 패키지 다운로드
(2) 파일질라, winscp를 이용해 리눅스 서버에 접속	* (로컬 - 원격컴퓨터 간 파일 전송 소프트웨어)
- sftp : ssh를 통한 업로드 프로토콜 사용
- 해당 홈 디렉터리에 (1)에서 다운받은 .rpm 패키지를 특정 디렉터리에 저장
- 조회 : cd ~ / ll


오라클에서 자바 다운로드시 .rpm 패키지 버전을 다운 가능하다
.rpm

마운트 : 특정 장치를 특정 디렉터리에 연결시켜주는 것을 말함


# centos os 다운
- 주소 : https://ftp.riken.jp/Linux/centos/


# 마운트 없이 복사해서 

